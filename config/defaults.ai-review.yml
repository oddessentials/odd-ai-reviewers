# Default AI Review Configuration
# Copy this to .ai-review.yml in your repository and customize

version: 1
trusted_only: true

triggers:
  on: [pull_request]
  branches: [main]

passes:
  # Static analysis - required by default (fails review if semgrep fails)
  - name: static
    agents: [semgrep, reviewdog]
    enabled: true
    required: true # Static analysis must succeed

  # Cloud AI review - optional (skips gracefully if no API key)
  - name: cloud-ai
    agents: [opencode]
    enabled: true
    required: false # Skip if OPENAI_API_KEY not configured

  # Local LLM review - optional (skips if Ollama unavailable)
  - name: local-ai
    agents: [local_llm]
    enabled: true
    required: false # Skip if Ollama not reachable

limits:
  max_files: 50
  max_diff_lines: 2000
  max_tokens_per_pr: 12000
  max_usd_per_pr: 1.00
  monthly_budget_usd: 100

# Model configuration
# Precedence: MODEL env var > models.default > hardcoded fallback
models:
  default: gpt-4o-mini

reporting:
  github:
    mode: checks_and_comments
    max_inline_comments: 20
    summary: true

gating:
  enabled: false
  fail_on_severity: error
# path_filters:
#   include:
#     - "src/**"
#     - "lib/**"
#   exclude:
#     - "**/*.test.ts"
#     - "**/node_modules/**"
#     - "**/dist/**"
